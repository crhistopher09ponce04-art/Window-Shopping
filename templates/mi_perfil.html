{% extends "base.html" %}
{% block content %}
<h2>üë§ Mi Perfil</h2>

<div class="card p-4 mb-4">
    <h4>Datos de la Empresa</h4>
    <form method="POST">
        <input type="hidden" name="update_profile" value="1">
        <div class="row mb-2">
            <div class="col-md-6"><label>Nombre</label><input type="text" name="name" value="{{ company[4] or '' }}" class="form-control"></div>
            <div class="col-md-6"><label>RUT/ID</label><input type="text" name="tax_id" value="{{ company[5] or '' }}" class="form-control"></div>
        </div>
        <div class="row mb-2">
            <div class="col-md-6"><label>Ciudad</label><input type="text" name="city" value="{{ company[6] or '' }}" class="form-control"></div>
            <div class="col-md-6"><label>Pa√≠s</label><input type="text" name="country" value="{{ company[7] or '' }}" class="form-control"></div>
        </div>
        <div class="row mb-2">
            <div class="col-md-6"><label>Tel√©fono</label><input type="text" name="phone" value="{{ company[8] or '' }}" class="form-control"></div>
            <div class="col-md-6"><label>Email</label><input type="text" name="email" value="{{ company[9] or '' }}" class="form-control"></div>
        </div>
        <button type="submit" class="btn btn-custom">Actualizar Datos</button>
    </form>
</div>

<div class="card p-4">
    <h4>Mis √çtems</h4>
    <form method="POST">
        <input type="hidden" name="add_item" value="1">
        <div class="row mb-2">
            <div class="col-md-4"><input type="text" name="item_name" class="form-control" placeholder="Producto/Servicio"></div>
            <div class="col-md-2"><input type="text" name="item_variety" class="form-control" placeholder="Variedad"></div>
            <div class="col-md-2"><input type="text" name="item_quantity" class="form-control" placeholder="Cantidad"></div>
            <div class="col-md-2"><input type="text" name="item_unit" class="form-control" placeholder="Unidad (kg, ton, cajas)"></div>
            <div class="col-md-2"><input type="text" name="item_price" class="form-control" placeholder="Precio"></div>
        </div>
        <div class="mb-2">
            <select name="item_type" class="form-control">
                <option value="venta">Venta</option>
                <option value="compra">Compra</option>
                <option value="servicio">Servicio</option>
            </select>
        </div>
        <button type="submit" class="btn btn-success">‚ûï Agregar √çtem</button>
    </form>

    <hr>
    <h5>√çtems Registrados</h5>
    {% if items %}
        <ul class="list-group">
            {% for item in items %}
                <li class="list-group-item d-flex justify-content-between">
                    {{ item[3] }} - {{ item[4] }} {{ item[5] }} {{ item[6] }} - ${{ item[7] }}
                    <form method="POST" style="margin:0;">
                        <button type="submit" name="remove_item" value="{{ item[0] }}" class="btn btn-danger btn-sm">üóë Eliminar</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-muted">No hay √≠tems a√∫n.</p>
    {% endif %}
</div>
{% endblock %}
