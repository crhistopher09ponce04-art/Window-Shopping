{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>üì• {{ t("Demandas de Compra", "Purchase Demands") }}</h2>
  {% if data and data|length > 0 %}
    <table class="table mt-2">
      <thead>
        <tr>
          <th>{{ t("Empresa", "Company") }}</th>
          <th>{{ t("Producto", "Product") }}</th>
          <th>{{ t("Cantidad", "Quantity") }}</th>
          <th>{{ t("Origen", "Origin") }}</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for c in data %}
          {% for it in c.items %}
            {% if it.tipo == "demanda" %}
              <tr>
                <td><a href="{{ url_for('empresa', slug=c.slug) }}">{{ c.nombre }}</a></td>
                <td>{{ it.producto }}</td>
                <td>{{ it.cantidad }}</td>
                <td>{{ it.origen }}</td>
                <td>
                  <form method="POST" action="{{ url_for('cart_add') }}">
                    <input type="hidden" name="empresa" value="{{ c.nombre }}">
                    <input type="hidden" name="producto" value="{{ it.producto }}">
                    <input type="hidden" name="tipo" value="demanda">
                    <button type="submit" class="btn">{{ t("Agregar", "Add") }}</button>
                  </form>
                </td>
              </tr>
            {% endif %}
          {% endfor %}
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>{{ t("No hay demandas disponibles.", "No purchase demands available.") }}</p>
  {% endif %}
</div>
<a href="{{ url_for('dashboard') }}" class="btn mt-3">‚¨ÖÔ∏è {{ t("Volver", "Back") }}</a>
{% endblock %}
