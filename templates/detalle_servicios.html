{% extends "base.html" %}
{% block content %}
<h2>🧰 {{ t("Servicios disponibles","Available services","可用服務") }}</h2>

<form method="GET" class="mt-2">
  <label>{{ t("Buscar", "Search", "搜尋") }}</label>
  <input type="text" name="q" value="{{ q or '' }}" placeholder="{{ t('Servicio o empresa...', 'Service or company...', '服務或公司...') }}">
  <button class="btn" type="submit">{{ t("Filtrar", "Filter", "篩選") }}</button>
</form>

<div class="grid mt-2">
  {% for c in data %}
  <div class="card">
    <h3><a href="{{ url_for('empresa', slug=c.slug) }}">{{ c.nombre }}</a></h3>
    <p><span class="badge">{{ c.rol }}</span> • {{ c.pais }}</p>
    <table class="table">
      <thead>
        <tr>
          <th>{{ t("Servicio", "Service", "服務") }}</th>
          <th>{{ t("Capacidad", "Capacity", "容量") }}</th>
          <th>{{ t("Ubicación", "Location", "位置") }}</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for it in c.items %}
        <tr>
          <td>{{ it.servicio }}</td>
          <td>{{ it.capacidad }}</td>
          <td>{{ it.ubicacion }}</td>
          <td>
            <form method="POST" action="{{ url_for('cart_add') }}">
              <input type="hidden" name="empresa" value="{{ c.nombre }}">
              <input type="hidden" name="servicio" value="{{ it.servicio }}">
              <input type="hidden" name="tipo" value="servicio">
              <button type="submit" class="btn">➕ {{ t("Agregar","Add","添加") }}</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% endfor %}
</div>

<a href="{{ url_for('dashboard') }}" class="btn mt-3">⬅️ {{ t("Volver","Back","返回") }}</a>
{% endblock %}
