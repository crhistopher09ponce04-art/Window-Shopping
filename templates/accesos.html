{% extends "base.html" %}
{% block content %}
<h2>Opciones de {{ tipo.capitalize() }}</h2>
<p><a href="{{ url_for('dashboard') }}">⬅ Volver al dashboard</a></p>

{% if empresas %}
    <table border="1" cellpadding="6" cellspacing="0">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Rol</th>
                <th>País</th>
                <th>Ciudad</th>
                <th>Fruta/Servicio</th>
                <th>Volumen (tons)</th>
                <th>Precio Caja</th>
                <th>Precio Kg</th>
                <th>Email</th>
            </tr>
        </thead>
        <tbody>
            {% for e in empresas %}
            <tr>
                <td><a href="{{ url_for('detalle', company_id=e.id) }}">{{ e.name }}</a></td>
                <td>{{ e.role }}</td>
                <td>{{ e.country }}</td>
                <td>{{ e.city }}</td>
                <td>
                    {% if e.role == "Cliente extranjero" %}
                        {{ e.product_requested }} ({{ e.variety_requested }})
                    {% elif e.role in ["Transporte","Agencia de aduana","Extraportuario"] %}
                        {{ e.service }}
                    {% else %}
                        {{ e.fruit }} ({{ e.variety }})
                    {% endif %}
                </td>
                <td>
                    {% if e.volume_tons %}{{ e.volume_tons }}{% elif e.volume_requested_tons %}{{ e.volume_requested_tons }}{% else %}-{% endif %}
                </td>
                <td>{{ e.price_box if e.price_box else "-" }}</td>
                <td>{{ e.price_kg if e.price_kg else "-" }}</td>
                <td>{{ e.email }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No hay empresas disponibles.</p>
{% endif %}
{% endblock %}
