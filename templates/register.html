{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>📝 {{ t("Crear Cuenta", "Create Account","创建账户") }}</h2>

  {% if error %}
    <div class="flash"><p>{{ error }}</p></div>
  {% endif %}

  <form method="POST" action="{{ url_for('register') }}">
    <div class="grid-3">
      <div>
        <label>{{ t("Nacionalidad", "Nationality","国籍") }}</label>
        <select name="nacionalidad" required>
          <option value="nacional" {% if nacionalidad=='nacional' %}selected{% endif %}>{{ t("Nacional", "National","国内") }}</option>
          <option value="extranjero" {% if nacionalidad=='extranjero' %}selected{% endif %}>{{ t("Extranjero", "Foreign","国外") }}</option>
        </select>
      </div>
      <div>
        <label>{{ t("Tipo de perfil", "Profile type","档案类型") }}</label>
        <select name="perfil_tipo" required>
          <option value="compra_venta" {% if perfil_tipo=='compra_venta' %}selected{% endif %}>{{ t("Compra/Venta", "Buy/Sell","买/卖") }}</option>
          <option value="servicios" {% if perfil_tipo=='servicios' %}selected{% endif %}>{{ t("Servicios", "Services","服务") }}</option>
        </select>
      </div>
      <div>
        <label>{{ t("Rol", "Role","角色") }}</label>
        <select name="rol" required>
          {% if perfil_tipo=='servicios' %}
            {% for r in roles_srv %}<option value="{{ r }}">{{ r }}</option>{% endfor %}
          {% else %}
            {% for r in roles_cv %}<option value="{{ r }}">{{ r }}</option>{% endfor %}
          {% endif %}
        </select>
      </div>
    </div>

    <div class="grid-3">
      <div>
        <label>{{ t("Usuario", "Username","用户") }}</label>
        <input type="text" name="username" required>
      </div>
      <div>
        <label>{{ t("Contraseña", "Password","密码") }}</label>
        <input type="password" name="password" required>
      </div>
      <div>
        <label>{{ t("RUT (SII)", "Tax ID (RUT)","税号") }}</label>
        <input type="text" name="rut" placeholder="11.111.111-1">
      </div>
    </div>

    <label>{{ t("Correo electrónico", "Email","邮箱") }}</label>
    <input type="email" name="email">

    <div class="grid-3">
      <div>
        <label>{{ t("Teléfono", "Phone","电话") }}</label>
        <input type="text" name="phone">
      </div>
      <div style="grid-column: span 2;">
        <label>{{ t("Dirección", "Address","地址") }}</label>
        <input type="text" name="address" placeholder="Calle, número, ciudad">
      </div>
    </div>

    <input type="submit" value="{{ t('Crear Cuenta', 'Create Account','创建账户') }}">
  </form>
</div>
{% endblock %}
