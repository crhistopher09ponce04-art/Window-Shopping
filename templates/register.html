{% extends "base.html" %}
{% block content %}
<div class="card">
<h2>{{ t("Formulario de Registro","Register Form","註冊表單") }}</h2>
{% if error %}<div class="mensaje">{{ error }}</div>{% endif %}

<form method="post" enctype="multipart/form-data">
  <div class="row">
    <div>
      <label>Email/Usuario</label>
      <input type="text" name="username" placeholder="user@example.com" required>
    </div>
    <div>
      <label>Password</label>
      <input type="password" name="password" required>
    </div>
  </div>

  <div class="row">
    <div>
      <label>{{ t("País","Country","國家") }}</label>
      <input type="text" name="pais" value="{{ 'CL' if nacionalidad=='nacional' else 'US' }}">
    </div>
    <div>
      <label>{{ t("Teléfono","Phone","電話") }}</label>
      <input type="text" name="phone">
    </div>
  </div>

  <label>{{ t("Dirección","Address","地址") }}</label>
  <input type="text" name="address">

  {# ----- Roles ----- #}
  {% if nacionalidad == 'extranjero' %}
    <label>{{ t("Rol","Role","角色") }}</label>
    <input type="text" value="Cliente extranjero" disabled>
    <input type="hidden" name="rol" value="Cliente extranjero">
  {% else %}
    <label>{{ t("Rol","Role","角色") }}</label>
    {% if perfil_tipo == 'servicios' %}
      <select name="rol">
        {% for r in roles_srv %}
          <option value="{{ r }}">{{ r }}</option>
        {% endfor %}
      </select>
    {% else %}
      <select name="rol">
        {% for r in roles_cv %}
          <option value="{{ r }}">{{ r }}</option>
        {% endfor %}
      </select>
    {% endif %}
  {% endif %}

  {# ----- Identificación ----- #}
  {% if nacionalidad == 'nacional' %}
    <div class="row">
      <div>
        <label>RUT</label>
        <input type="text" name="rut" placeholder="76.123.456-7">
      </div>
      <div>
        <label>{{ t("Adjuntar RUT (PDF/Imagen)","Attach RUT (PDF/Image)","附加RUT(檔/圖)") }}</label>
        <input type="file" name="rut_file" accept=".pdf,.png,.jpg,.jpeg">
      </div>
    </div>
  {% else %}
    <div class="row-3">
      <div>
        <label>USCI</label>
        <input type="text" name="usci" placeholder="US-XXXX-YY">
      </div>
      <div>
        <label>EORI</label>
        <input type="text" name="eori">
      </div>
      <div>
        <label>TAX ID</label>
        <input type="text" name="tax_id">
      </div>
    </div>
    <label>{{ t("Otros (opcional)","Other (optional)","其他(選填)") }}</label>
    <input type="text" name="otros_id">
  {% endif %}

  <button type="submit">{{ t("Registrar","Register","註冊") }}</button>
</form>
</div>
{% endblock %}
