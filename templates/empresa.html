{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>{{ comp.nombre }}</h2>
  <p class="mt-1">
    <span class="badge">{{ comp.rol }}</span> • {{ comp.pais }}
    {% if comp.perfil_tipo=='servicios' %} • {{ t("Servicios","Services","服务") }}
    {% else %} • {{ t("Compra/Venta","Buy/Sell","买卖") }}{% endif %}
  </p>
  <p class="mt-1">RUT: {{ comp.rut }}</p>
  <p class="mt-1">{{ comp.breve }}</p>

  <div class="mt-2">
    <p><strong>{{ t("Contacto","Contact","联系") }}:</strong> {{ comp.email }} • {{ comp.telefono }}</p>
    <p><strong>{{ t("Dirección","Address","地址") }}:</strong> {{ comp.direccion }}</p>
  </div>
</div>

{% if comp.items and comp.items|length>0 %}
  <div class="card">
    <h3>{{ t("Detalles", "Details", "明细") }}</h3>
    <table class="table mt-2">
      <thead>
        <tr>
          {% if comp.perfil_tipo=='servicios' %}
            <th>{{ t("Servicio", "Service", "服务") }}</th>
            <th>{{ t("Capacidad", "Capacity", "产能") }}</th>
            <th>{{ t("Ubicación", "Location", "位置") }}</th>
            <th></th>
          {% else %}
            <th>{{ t("Tipo", "Type", "类型") }}</th>
            <th>{{ t("Producto", "Product", "产品") }}</th>
            <th>{{ t("Cantidad", "Quantity", "数量") }}</th>
            <th>{{ t("Origen", "Origin", "产地") }}</th>
            <th>{{ t("Precio", "Price", "价格") }}</th>
            <th></th>
          {% endif %}
        </tr>
      </thead>
      <tbody>
        {% for it in comp.items %}
        <tr>
          {% if comp.perfil_tipo=='servicios' %}
            <td>{{ it.servicio }}</td>
            <td>{{ it.capacidad }}</td>
            <td>{{ it.ubicacion }}</td>
          {% else %}
            <td>{{ it.tipo }}</td>
            <td>{{ it.producto }}</td>
            <td>{{ it.cantidad }}</td>
            <td>{{ it.origen }}</td>
            <td>{{ it.precio or '-' }}</td>
          {% endif %}
          <td class="right">
            <form method="POST" action="{{ url_for('cart_add') }}">
              <input type="hidden" name="empresa" value="{{ comp.nombre }}">
              {% if comp.perfil_tipo=='servicios' %}
                <input type="hidden" name="servicio" value="{{ it.servicio }}">
                <input type="hidden" name="tipo" value="servicio">
              {% else %}
                <input type="hidden" name="producto" value="{{ it.producto }}">
                <input type="hidden" name="tipo" value="{{ it.tipo }}">
              {% endif %}
              <button type="submit" class="btn">{{ t("Agregar", "Add", "加入") }}</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endif %}

<a class="btn mt-2" href="{{ url_for('dashboard') }}">⬅️ {{ t("Volver", "Back", "返回") }}</a>
{% endblock %}
